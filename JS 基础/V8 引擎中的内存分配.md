## 数据类型

- **基本数据类型**：String，Boolean，Number，Null，Undefined，Symbol，BigInt

- **引用数据类型**：Object，Array，Function，以及各种继承于 Object 的其他类型

## 内存特点

栈内存：

1. 存储的值不能变
2. 存储空间小
3. 可以直接操作变量，运行快
4. 系统自动分配等长的存储空间（32/64 位），线性有序

堆内存：

1. 存储的值可变
2. 存储空间大
3. 需要通过引用地址读取内存，不能直接操作，运行效率低
4. 通过代码分配空间，零散无序

## 存储方式
ECMAScript规范对内存的说明非常模糊，没有明确定义 String 类型如何实现，具体实现要看各个 JS 引擎。所以对类型存储是有争议的，一部分认为：
- **基本数据类型**：真实数据直接存储在栈(stack)内存中，除了闭包中的变量。
- **引用数据类型**：在栈(stack)中存储指针，真实的数据是 object 存在堆(heap)内存。指针指向堆内存。

闭包中的变量保存在堆内存中。

又有人分析了 [V8 引擎中字符串的 5 种表达模式](https://segmentfault.com/a/1190000023258026)，表示：
- **Boolean、Null、Undefined、Number 保存在栈内存**中，这些类型的值都可以用32位的数据来表示
- **Symbol、BigInt、Object、String 保存在堆中，栈里面只会保存这些值的地址的引用**。

在 V8 引擎中，如果两个变量被赋值了同一字符串

```js
var a = 'string';
var b = 'string';
```
则，a、b 保存在栈内存中，且他们保存了相同的堆内存地址，这种现象叫做字符串驻留（String interning）。好处是
- 节省内存，相同的内容只分配了一块内存
- 在全等比较（===）时运行快

#### 后话

V8 也对 Number 进行了引擎层面（JS 不区分的！！）的优化，按照长度分为 Smi 和 HeapNumber，

- Smi：32位以内的小整数，放在栈内存，操作快，比如 for 循环
- HeapNumber：长于32位的浮点数，放在堆内存，比如 NaN,Infinity
