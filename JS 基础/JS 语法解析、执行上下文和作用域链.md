## 解析过程、词法环境、语法环境
- 词法分析，将语句分词，解析成单个 token
- 语法分析，根据 token 生成 AST，如果有语法错误就报错
- 代码生成，将 AST 翻译成转成计算机可以识别的机器指令码
词法分析和语法分析不是完全独立、串行的，而是交错运行的。

词法环境 的构成 = 环境记录+ 对外部环境的引用。
- 环境记录：
  - 全局环境记录：没有外部环境的词法环境，引用是 null。拥有一个全局（window）对象，及全局对象关联的属性、方法，和用户定义的全局变量。
  - 声明式环境记录：登记「变量声明｜函数声明｜函数形参 （arguments 对象）」。
- 对外部环境的引用：意味着它可以访问其外部词法环境，是作用域链能够连接起来的关键

## 作用域及作用域链
每个环境能访问到的标识符集合，称之为“作用域”。   
作用域规定了如何查找变量，确定执行代码对变量的访问权限。  
作用域是变量和函数的可访问范围，控制它们的可见性和生命周期。是一个独立的范围，使定义在里面的变量和函数不会泄漏出去。最大的用处就是隔离变量，避免同名变量冲突。  

JavaScript 采用的是词法作用域，函数的静态作用域在函数声明时的位置决定。  
而与词法作用域相对的是动态作用域，函数的动态作用域是在函数调用的时候才确定。  

#### 作用域类型：

按作用域的范围分，
- 全局作用域（global/window）
- 局部作用域，比如函数作用域

按代码执行分，
- 静态作用域，词法作用域，指编写代码时变量、函数所在的作用域，变量创建时就决定了其值，源代码的位置（嵌套）决定了变量的值。无论函数在何处、怎么样被调用，该函数的词法作用域都只由函数声明时所处的位置决定。
- 动态作用域，基于栈结构，局部变量和函数参数都存储在栈中。变量的值由代码运行时的栈顶执行上下文决定。

动态作用域中的变量值可能与静态作用域中的不相同，因为运行时会修改变量的值。


ES6 之前 JavaScript 没有块级作用域，只有全局作用域和函数作用域。ES6 的到来，为我们提供了‘块级作用域’，可通过 let 和 const 来体现。

#### 作用域链：
本质上是一个指向变量对象的指针列表，只引用、不包含变量对象。
负责掌管一切变量、函数的访问顺序：局部作用域 —> 父级作用域 —> 全局作用域。
